import{createElement}from"../utils/index.js";import{shop}from"../constants.js";let shopItemContainer=shop.querySelector("#shop-items > ul"),levelOverviewContainer=shop.querySelector("#level-overview > ul");class BaseShopItem{id;name;unlockCost=0;levelOverviewSpan;levelUpButton;#level=0;get level(){return this.#level}set level(e){this.#level=e,this.levelOverviewSpan.dataset.value=e,this.levelOverviewSpan.textContent=e?e.toLocaleString():""}get unlocked(){return 0<this.level||clickCount>=this.unlockCost/2}get affordable(){return this.unlocked?clickCount>=this.calc.getCost():clickCount>=this.unlockCost}calc={getCost:()=>this.unlockCost*(this.level+1),getIncrease:()=>this.level+1};addToDOM(){this.levelUpButton=createElement("button",{id:this.id,textContent:this.name,className:this.level?"unlocked":void 0},createElement("li",void 0,shopItemContainer));var e=createElement("p",{id:"hover-info",innerHTML:"Cost: <span id='cost'></span><br>Clicks: <span id='clicks'></span>"},createElement("div",{className:"hover-info-container"},this.levelUpButton));let l=e.children.namedItem("cost"),s=e.children.namedItem("clicks");return this.levelUpButton.addEventListener("mouseenter",()=>{var e=this.calc.getCost(),t=this.calc.getIncrease();l.dataset.value!==e&&(l.dataset.value=e,l.textContent=e.toLocaleString()),s.dataset.value!==t&&(s.dataset.value=t,s.textContent=t.toLocaleString())}),this.levelOverviewSpan=createElement("span",{id:"level-"+this.id,textContent:this.level.toLocaleString()||""},createElement("li",{id:this.id,textContent:this.name},levelOverviewContainer)),this.levelOverviewSpan.dataset.value=this.level,this}refreshUseabilities(){!this.levelUpButton.classList.contains("unlocked")&&this.unlocked&&this.levelUpButton.classList.add("unlocked"),this.affordable?this.levelUpButton.classList.add("affordable"):this.levelUpButton.classList.contains("affordable")&&this.levelUpButton.classList.remove("affordable")}constructor(e,t,l=0){this.id=e,this.name=t,this.unlockCost=l}toJSON(){return{level:this.level}}}export{BaseShopItem};